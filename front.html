<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script
            src="https://cdnjs.cloudflare.com/ajax/libs/aws-sdk/2.1045.0/aws-sdk.min.js"></script>

        <title>Really Super Awesome Photo Album</title>
        <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 20px;
        }
        .container {
            background-color: #fff;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            max-width: 600px;
            margin: 50px auto;
        }
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 20px;
        }
        .search-bar {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            align-items: center;
        }
        .search-bar input[type="text"] {
            padding: 10px;
            flex: 1;
            border: 1px solid #ccc;
            border-radius: 30px;
            margin-right: 20px;
            outline: none;
        }
        .search-bar button {
            padding: 10px 15px;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            background: linear-gradient(90deg, rgba(131,58,180,1) 0%, rgba(253,29,29,1) 50%, rgba(252,176,69,1) 100%);
            color: #fff;
            outline: none;
            margin-right: 20px;
        }
        .centered-content {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
            margin-bottom: 10px;
        }
        .file-label {
            width: auto;
            padding: 10px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            background-color: #333;
            color: #fff;
            display: block;
            text-align: center;
            margin-right: 10px;
        }
        .image-box {
            width: 100%;
            height: 200px;
            border: 1px dashed #ccc;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 10px;
        }
    </style>
    </head>

    <script>
    // AWS.config.update({
    //     region: 'us-east-1',
    //     accessKeyId: 'AKIAR4CQAH543U4FFCIO',
    //     secretAccessKey: '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'
    // });

    function uploadToS3() {
        const labels = document.getElementById("labelbox").value;
        var file = document.getElementById('image_input').files[0];
        
        var myHeaders = new Headers();
        myHeaders.append("x-amz-meta-customLabels", labels);
        myHeaders.append("Content-Type", file.type);
        myHeaders.append("x-api-key", "OHZMy4Q5Ng8vJI3OnekBg7xso1y9jox54gnA6h1P");


        if (file) {
            var requestOptions = {
                method: 'PUT',
                headers: myHeaders,
                body: file,
                redirect: 'follow'
            };

            var promise = s3.send();

            fetch("https://4ec5sdfffe.execute-api.us-east-1.amazonaws.com/test-stage?f="+file.name, requestOptions)
            .then(response => response.text())
            .then(result => console.log(result))
            .catch(error => console.log('error', error));
        } 
        else {
            console.log('No file chosen');
        }
    }


</script>

    <body>
        <div class="container">
            <h1>Welcome to Really Super Awesome Photo Album!</h1>
            <div class="search-bar">
                <input type="text" placeholder="Search...">
                <button>Search</button>
                <button>Speak to search</button>
            </div>
            <form method="post" action enctype="multipart/form-data" id="myform">
                <div class="centered-content">
                    <input type="text" id="labelbox" placeholder="Custom Labels">
                </div>
                <div class="centered-content">
                    <!-- <label for="image_input" class="file-label">Select Image</label> -->
                    <input type="file" id="image_input"
                        accept="image/jpg, image/png" placeholder="select files">
                    <button class="upload" id="upload-file" onclick="uploadToS3()">Upload</button>
                </div>
            </form>
            <div class="image-box">
                <span></span>
            </div>
        </div>
    </body>

</html>
